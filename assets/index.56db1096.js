var T=Object.defineProperty,A=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var h=(t,n,e)=>n in t?T(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,s=(t,n)=>{for(var e in n||(n={}))N.call(n,e)&&h(t,e,n[e]);if(_)for(var e of _(n))V.call(n,e)&&h(t,e,n[e]);return t},b=(t,n)=>A(t,z(n));import{a as f}from"./vendor.10bd23ac.js";import{p as y,L}from"./index.dea20df7.js";import{I as P}from"./index.7e6c9d9a.js";import{c as U}from"./zIndex.bcf143f4.js";import{c as M}from"./lock.c245d2f0.js";import{p as k,m as q}from"./components.e000a0b0.js";import{T as D}from"./Teleport.f02619e5.js";import{n as S}from"./index.0a9349fd.js";import{r as B}from"./index.b82c43fb.js";import{f as F,d as j,i as G,t as $}from"./shared.f8da68a0.js";function R(t){return["top","center","bottom"].includes(t)}function Y(t){return m.includes(t)}const x={type:{type:String,validator:Y},position:{type:String,default:"top",validator:R},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:k(y,"type"),loadingSize:k(y,"size"),lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},customUpdate:{type:String}};var H=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"var-snackbar",style:{pointerEvents:t.isForbidClick?"auto":"none",zIndex:t.zIndex}},[e("div",{class:t.snackbarClass,style:{zIndex:t.zIndex}},[e("div",{staticClass:"var-snackbar__content",class:[t.contentClass]},[t._t("default",function(){return[t._v(t._s(t.content))]})],2),e("div",{staticClass:"var-snackbar__action"},[t.iconName?e("var-icon",{attrs:{name:t.iconName}}):t._e(),t.type==="loading"?e("var-loading",{attrs:{type:t.loadingType,size:t.loadingSize}}):t._e(),t._t("action")],2)])])},K=[];const Z={name:"VarSnackbarCore",components:{VarLoading:L,VarIcon:P},mixins:[U("show",1),M("show","lockScroll")],props:x,data:()=>({timer:null,ICON_TYPE_DICT:{success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""}}),computed:{snackbarClass(){const{position:t,vertical:n,type:e}=this,a=`var-snackbar__wrapper var-snackbar__wrapper-${t} var-elevation--4`,o=n?" var-snackbar__vertical":"",r=e&&m.includes(e)?` var-snackbar__wrapper-${e}`:"";return`${a}${o}${r}`},isForbidClick(){return this.type==="loading"||this.forbidClick},iconName(){return this.type?this.ICON_TYPE_DICT[this.type]:""}},watch:{show(t){t?(this.$emit("open"),this.updateAfterDuration()):t===!1&&(clearTimeout(this.timer),this.$emit("close"))},customUpdate(){clearTimeout(this.timer),this.updateAfterDuration()}},mounted(){this.show&&(this.$emit("open"),this.updateAfterDuration())},methods:{updateAfterDuration(){this.timer=setTimeout(()=>{this.$emit("update:show",!1)},this.duration)}}},g={};var J=S(Z,H,K,!1,Q,null,null,null);function Q(t){for(let n in g)this[n]=g[n]}var O=function(){return J.exports}(),W=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("teleport",{attrs:{to:t.teleport}},[e("transition",{attrs:{name:"var-snackbar-fade"},on:{"after-enter":function(a){return t.$emit("opened")},"after-leave":function(a){return t.$emit("closed")}}},[e("var-snackbar-core",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"var-snackbar-transition",scopedSlots:t._u([{key:"action",fn:function(){return[t._t("action")]},proxy:!0}],null,!0)},"var-snackbar-core",t.$props,!1),t.$listeners),[t._t("default",function(){return[t._v(t._s(t.content))]})],2)],1)],1)},X=[];const tt={name:"VarSnackbar",components:{VarSnackbarCore:O,Teleport:D},props:x},C={};var et=S(tt,W,X,!1,nt,null,null,null);function nt(t){for(let n in C)this[n]=C[n]}var c=function(){return et.exports}();const m=["loading","success","warning","info","error"];let w=0,v=!1,d,l=!1,i=f.observable({value:[]});const at={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},ot={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"};function rt(t,n){const{id:e,reactiveSnackOptions:a,customUpdate:o}=n,r=b(s({},a),{"data-id":e,customUpdate:o}),p=[{name:"show",rawName:"v-show",value:a.show,expression:"show"}],E={position:l?"relative":"absolute",top:pt(a.position)};return t(O,{key:e,attrs:r,style:E,directives:p,on:{"update:show":I=>{a.show=I},open:()=>{a==null||a.onOpen()},close:()=>{a==null||a.onClose()}}})}const it={render(t){const n=i.value.map(({id:e,reactiveSnackOptions:a,customUpdate:o})=>{const r=document.querySelector(".var-transition-group");return a.forbidClick||a.type==="loading"?r.classList.add("var-pointer-auto"):r.classList.remove("var-pointer-auto"),l&&(a.position="top"),rt(t,{id:e,reactiveSnackOptions:a,customUpdate:o})});return t("transition-group",{attrs:s({},ot),style:{zIndex:B.zIndex},on:{"after-enter":st,"after-leave":ct}},n)}},u=function(t){const n=j(t)||G(t)?{content:String(t)}:t,e=f.observable(s(s({},at),n));f.set(e,"show",!0),v||(v=!0,d=q(it).unmount);const{length:a}=i.value,o={id:w++,reactiveSnackOptions:e};if(a===0||l)lt(o);else{const r=`update-${w}`;ut(e,r)}return{clear(){!l&&i.value.length?i.value[0].reactiveSnackOptions.show=!1:e.show=!1}}};m.forEach(t=>{u[t]=n=>(F(n)?n.type=t:n={content:n,type:t},u(n))});u.install=function(t){t.component(c.name,c)};u.allowMultiple=function(t=!1){t!==l&&(i.value.forEach(n=>{n.reactiveSnackOptions.show=!1}),l=t)};u.clear=function(){i.value.forEach(t=>{t.reactiveSnackOptions.show=!1})};u.Component=c;function st(t){var a,o;const n=t.getAttribute("data-id"),e=i.value.find(r=>r.id===$(n));e&&((o=(a=e.reactiveSnackOptions).onOpened)==null||o.call(a))}function ct(t){var o,r;t.parentElement&&t.parentElement.classList.remove("var-pointer-auto");const n=t.getAttribute("data-id"),e=i.value.find(p=>p.id===$(n));e&&(e.animationEnd=!0,(r=(o=e.reactiveSnackOptions).onClosed)==null||r.call(o)),i.value.every(p=>p.animationEnd)&&(d==null||d(),i=f.observable({value:[]}),v=!1)}function lt(t){i.value.push(t)}function ut(t,n){const[e]=i.value;e.reactiveSnackOptions=s(s({},e.reactiveSnackOptions),t),e.customUpdate=n}function pt(t="top"){return t==="center"?"45%":t==="bottom"?"85%":"50px"}c.install=function(t){t.component(c.name,c)};export{u as S};
